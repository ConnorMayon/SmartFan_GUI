<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>SMARTFAN GUI</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <h1>SMARTFAN GUI</h1>

    <div class="titles-container">
        <h2 class="center-title">Set Preferred Temperature Range</h2>
        <h2 class="center-title">Set Preferred Cooling Time</h2>
    </div>
    <div class="preferences">
        <div class="temperature-container">
            <div class="temp-unit">
                <div class="button-group">
                    <button class="up" onclick="increaseAndLog('minTempValue', 'Min Temp increased')">Up</button>
                    <span id="minTempValue">65</span>
                    <button class="down" onclick="decreaseAndLog('minTempValue', 'Min Temp decreased')">Down</button>
                </div>
                <label for="minTemp">Min Temp</label>
            </div>
            <div class="temp-unit">
                <div class="button-group">
                    <button class="up" onclick="increaseAndLog('maxTempValue', 'Max Temp increased')">Up</button>
                    <span id="maxTempValue">85</span>
                    <button class="down" onclick="decreaseAndLog('maxTempValue', 'Max Temp decreased')">Down</button>
                </div>
                <label for="maxTemp">Max Temp</label>
            </div>
        </div>

        <div class="time-container">
            <div class="time-structure">
                <div class="time-unit">
                    <div class="button-group">
                        <button class="up" onclick="increaseAndLog('hoursValue', 'Hours increased')">Up</button>
                        <span class="time-value" id="hoursValue">5</span>
                        <button class="down" onclick="decreaseAndLog('hoursValue', 'Hours decreased')">Down</button>
                    </div>
                    <label for="hours">Hours</label>
                </div>
                <div class="time-unit">
                    <div class="button-group">
                        <button class="up" onclick="increaseAndLog('tenMinutesValue', '10 Minutes increased')">Up</button>
                        <span class="time-value" id="tenMinutesValue">0</span>
                        <button class="down" onclick="decreaseAndLog('tenMinutesValue', '10 Minutes decreased')">Down</button>
                    </div>
                    <label for="tenMinutes">Min</label>
                </div>
                <div class="time-unit">
                    <div class="button-group">
                        <button class="up" onclick="increaseAndLog('minutesValue', '1 Minute increased')">Up</button>
                        <span class="time-value" id="minutesValue">0</span>
                        <button class="down" onclick="decreaseAndLog('minutesValue', '1 Minute decreased')">Down</button>
                    </div>
                    <label for="minutes">Min</label>
                </div>
            </div>
        </div>
    </div>
    
    <div class="button-group">
        <button onclick="saveTime()">Save Time</button>
        <button onclick="switchPage()">Switch Page</button>
    </div>

    <script>
        function increaseAndLog(elementId, message) {
            var value = parseInt(document.getElementById(elementId).innerText);
            document.getElementById(elementId).innerText = value + 1;
            fetch('/log?message=' + message);
        }

        function decreaseAndLog(elementId, message) {
            var value = parseInt(document.getElementById(elementId).innerText);
            if (value > 0) {
                document.getElementById(elementId).innerText = value - 1;
                fetch('/log?message=' + message);
            }
        }

        function saveTime() {
         var hours = parseInt(document.getElementById('hoursValue').innerText);
         var tenMinutes = parseInt(document.getElementById('tenMinutesValue').innerText);
         var minutes = parseInt(document.getElementById('minutesValue').innerText);

         var formattedTime = hours + ':' + tenMinutes + minutes;

         var savedTimes = JSON.parse(localStorage.getItem('savedCoolingTimes')) || [];

         savedTimes.push(formattedTime);

         localStorage.setItem('savedCoolingTimes', JSON.stringify(savedTimes));

         window.location.href = "schedule.html";
        }


        function switchPage() {
            window.location.href = "schedule.html";
        }
    </script>
</body>

</html>
